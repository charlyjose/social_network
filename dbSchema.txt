Schema
------

--
--  TABLE STRUCTURE FOR `sn`
--



CREATE database sn;
use sn;

##############################################################
CREATE USER 'user'@'localhost' IDENTIFIED BY '*******';
GRANT ALL PRIVILEGES ON vyapti19 . * TO 'user'@'localhost';
mysql -u root -p sn < sn.sql
FLUSH PRIVILEGES;
##############################################################



# TABLE 1 user

CREATE TABLE IF NOT EXISTS `user` (
    `name` varchar(30) NOT NULL,
    `uname` varchar(30) NOT NULL UNIQUE,
    `email` varchar(50) NOT NULL UNIQUE,
    `collegeID` varchar(10) NOT NULL PRIMARY KEY,
    `password` varchar(20) NOT NULL,
    `gender` tinyint(1) DEFAULT 0,
    `dob` varchar(10) DEFAULT 0,
    `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `edit_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

gender
-------

3 ----> Female
2 ----> Male
1 ----> Other
0 ----> Prefer not to say



# TABLE 2 auth
 
CREATE TABLE IF NOT EXISTS `auth` (
    `email` varchar(50) NOT NULL PRIMARY KEY,
    `session` char(64)  NOT NULL UNIQUE,
    `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


# TABLE 3 posts

CREATE TABLE IF NOT EXISTS `posts` (
    `postid` int PRIMARY KEY AUTO_INCREMENT NOT NULL,
    `likes` int DEFAULT 0,
    `views` int DEFAULT 0,
    `shares` int DEFAULT 0,
    `edit` tinyint(1) DEFAULT 0,
    `content` json,
    `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `edit_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE posts AUTO_INCREMENT=100;


# TABLE 4 details

CREATE TABLE IF NOT EXISTS `details` (
    `collegeID` varchar(10) NOT NULL,
    `avatar` varchar(200) DEFAULT NULL,
    `summary` json,
    `skills` json,
    `contacts` json,
    `education` json,
    `accomplishments` json,
    `interests` json,
    `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `edit_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;













# TABLE 2 address

CREATE TABLE IF NOT EXISTS `address` (
    `collegeID` varchar(10) NOT NULL,
    `addressline1` varchar(30) NOT NULL,
    `addressline2` varchar(30) NOT NULL,
    `city` varchar(30) NOT NULL,
    `country` varchar(30) NOT NULL,    
    `zip` varchar(10) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

insert into address (collegeID, addressline1, addressline2, city, country, zip) values("MUT16CS001", "Karimugal", "Karimugal PO", "Ernakulam", "IN","682303");
insert into address (collegeID, addressline1, addressline2, city, country, zip) values("MUT16CS020", "Koothattukulam", "Koothattukulam PO", "Ernakulam", "IN","682569");

update user set password = req.body.passwordnew where session = req.session.email


insert into user (name, uname, email, collegeID, password) values("Charly Jose","charlyjose", "charlyjose@gmail.com", "MUT16CS001", "1234");


## data = 0 ---> ERROR
## data = 1 ---> text
## data = 2 ---> image
## data = 3 ---> video
## data = 4 ---> image with text










# TABLE 5 transaction

CREATE TABLE `transaction` (
  `tid` int(11) NOT NULL AUTO_INCREMENT,
  `pid` int(11) NOT NULL,
  `cid` char(15) NOT NULL,
  `ehid` char(5) NOT NULL,
  `withdraw` tinyint(1) NOT NULL DEFAULT 0,
  `deposit` tinyint(1) NOT NULL DEFAULT 0,
  `amount` smallint(4) NOT NULL DEFAULT 0,
  `time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`tid`)
) ENGINE=InnoDB AUTO_INCREMENT=11500 DEFAULT CHARSET=utf8;
